import{r as l,a as h,n as f,u as j,j as s,b as u,L as v,_ as m}from"./index-CSuiw8Nw.js";var E={BASE_URL:"/E-Commerce-Website/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const g=()=>{const[i,a]=l.useState(!1),[r,n]=l.useState([]);l.useEffect(()=>{d()},[]);const d=async()=>{var o;try{a(!0);const c=localStorage.getItem("token");if(!c)throw new Error("Token not found");const e=await h.get(`${E.VITE_SERVER}/api/v1/order/all`,{headers:{Authorization:`Bearer ${c}`}});a(!1),f.success("Fetched all Orders"),n((o=e==null?void 0:e.data)==null?void 0:o.orders)}catch(c){a(!1),console.log(c)}};return{allordersData:r,isLoading:i}};var x={BASE_URL:"/E-Commerce-Website/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const p=()=>{const i=j(e=>e.user),{allordersData:a,isLoading:r}=g(),[n,d]=l.useState([]);l.useEffect(()=>{d(a)},[a]);const o=async e=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("Token not found");const b=await h.delete(`${x.VITE_SERVER}/api/v1/order/${e}`,{headers:{Authorization:`Bearer ${t}`}});m.success("Order deleted")}catch(t){console.log(t)}},c=async e=>{try{if(!localStorage.getItem("token"))throw new Error("Token not found");const b=await h.put(`${x.VITE_SERVER}/api/v1/order/${e}`,{userId:i==null?void 0:i._id});m.success("Order Processed")}catch(t){console.log(t)}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"dash-container",children:[s.jsxs("div",{className:"sidebar",children:[s.jsx(u,{className:"sidebar-btn active",to:"/admin/dashboard/products",style:{textDecoration:"none",color:"white",fontWeight:"bold",borderRadius:"5px"},children:"Products"}),s.jsx(u,{to:"/admin/dashboard/customers",className:"sidebar-btn active",style:{textDecoration:"none",color:"white",fontWeight:"bold",borderRadius:"5px"},children:"Users"}),s.jsx("p",{className:"sidebar-btn active",style:{textDecoration:"none",color:"white",fontWeight:"bold",borderRadius:"5px"},children:"Orders"})]}),s.jsxs("div",{className:"content",children:[s.jsx("div",{className:"product-header",children:s.jsx("h2",{children:"ORDERS"})}),s.jsxs("div",{id:"customer",children:[s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"heading",children:"Order ID"}),s.jsx("div",{className:"heading",children:"Name"}),s.jsx("div",{className:"heading",children:"Total"}),s.jsx("div",{className:"heading",children:"Status"}),s.jsx("div",{className:"heading",children:"Action"})]}),r?s.jsx(v,{}):n==null?void 0:n.map(e=>{var t;return s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"subitem",children:[e==null?void 0:e._id.slice(0,15),"..."]}),s.jsx("div",{className:"subitem",children:(t=e==null?void 0:e.userId)==null?void 0:t.firstName}),s.jsx("div",{className:"subitem",children:e==null?void 0:e.total}),s.jsx("div",{className:"subitem",children:e==null?void 0:e.status}),s.jsxs("div",{className:"subitem",children:[s.jsx("button",{onClick:()=>c(e==null?void 0:e._id),className:"process-order-btn",children:"Process"}),s.jsx("button",{onClick:()=>o(e==null?void 0:e._id),className:"user-delete-button",children:"Delete"})]})]},e==null?void 0:e._id)})]})]})]})})};export{p as default};
